{{ if and (.Values.contour.enabled) (.Values.certManager.enabled) }}
# allows contour to use the wildcard cert generated by cert-manager. See https://projectcontour.io/docs/main/config/tls-delegation/
apiVersion: projectcontour.io/v1
kind: TLSCertificateDelegation
metadata:
  name: wildcard-certificate-delegation
  namespace: cert-manager
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
spec:
  delegations:
    - secretName: wildcard-certificate
      targetNamespaces:
      - "*"
{{- end }}